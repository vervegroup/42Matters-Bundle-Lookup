import requests
import csv
import sys
sys.stdout = open("ios.txt", "w")

bundle = ["1407852246",
"281940292",
"399355755",
"1207472156",
"322439990",
"1193508329",
"1496354836",
"591560124",
"1617391485",
"1212951043",
"305343404",
"1191435163",
"295646461",
"1452227871",
"1095569891",
"367623543",
"1132762804",
"579581125",
"358899126",
"1196764367",
"642831690",
"500962489",
"1491129492",
"1080465358",
"357218860",
"372648912",
"318133983",
"1324604053",
"1214223596",
"804379658",
"429610587",
"1557392270",
"1190849728",
"1274972321",
"366247306",
"321916506",
"325658560",
"1420294918",
"384101264",
"1220307907",
"444741112",
"1226926872",
"1466197423",
"506141837",
"382617920",
"500963785",
"1502447854",
"1163786766",
"1498229533",
"1452992954",
"1505735640",
"418987775",
"1545567989",
"622434129",
"395979574",
"381471023",
"458056343",
"1078160821",
"1473836342",
"341232718",
"1519174001",
"1413942319",
"714796093",
"383298204",
"359917414",
"1369521645",
"500964912",
"1215933788",
"1611547216",
"651510680",
"1115565187",
"545551605",
"306310789",
"378563358",
"1252579064",
"553834731",
"302324249",
"416048305",
"324565014",
"1269540854",
"1508275130",
"587366035",
"1494648714",
"1589762792",
"1519726590",
"1420058690",
"1550945606",
"1020581825",
"1572661625",
"1514542157",
"307184892",
"1313561414",
"639881495",
"397648381",
"1442749804",
"998411110",
"921765888",
"1331794412",
"1198510863",
"952578473",
"6448941703",
"1265133033",
"1277486668",
"626565093",
"1317978215",
"1445135380",
"495583717",
"285692706",
"1084662006",
"525958087",
"1245525899",
"352969997",
"1499605819",
"1500918157",
"314716233",
"1214763610",
"1374837929",
"1337578317",
"1579356887",
"299948601",
"964436963",
"352509417",
"1496150467",
"336435697",
"1299956969",
"1569776448",
"349866256",
"1550569446",
"294047850",
"894546091",
"922825959",
"523001403",
"1607122287",
"396301854",
"1518389230",
"1494864196",
"358731598",
"1568058543",
"1445691600",
"1619320898",
"1570641170",
"478653772",
"393048976",
"301987699",
"1658495567",
"450722833",
"382002079",
"840919914",
"1454637812",
"1622939649",
"632064380",
"1634480695",
"409060691",
"377869410",
"1645521235",
"1334311990",
"1487766983",
"1225888584",
"6444416655",
"308834491",
"555376968",
"545993260",
"709482991",
"1557233964",
"1530876832",
"1641732564",
"1163777816",
"1423046460",
"1446728841",
"1346179411",
"1342112505",
"1600437663",
"1492451796",
"319557427",
"1492978794",
"911793120",
"526641427",
"779656557",
"1665914232",
"1197354394",
"306621789",
"1415516694",
"467280605",
"1606674182",
"645704840",
"349812998",
"1627184882",
"1357464684",
"569077959",
"1487607878",
"1596200530",
"997362197",
"657500465",
"1564391515",
"1536584509",
"com.foxnews.android",
"972013240",
"398129933",
"1630942647",
"658308834",
"1454567241",
"1522667579",
"6444056676",
"1616149789",
"694876905",
"294056623",
"448999087",
"1516617231",
"1643547847",
"6447615126",
"888786749",
"1318181304",
"1464689103",
"1407780576",
"479280326",
"1502948858",
"850417475",
"909998122",
"1529614832",
"364677107",
"319740707",
"1182341536",
"1559032748",
"522681493",
"1057889290",
"475976577",
"1517375267",
"1562322785",
"1546705283",
"1448037588",
"1557357811",
"904209370",
"1357131935",
"1380448783",
"1031653653",
"1585080096",
"313624917",
"517840944",
"1510189987",
"332116103",
"364909474",
"1076859004",
"592331499",
"977150768",
"1579512060",
"1666903635",
"1473424857",
"1613687713",
"880195209",
"933135994",
"1456732568",
"1444990764",
"1624609776",
"1499081620",
"jp.co.kodansha.ios.magazinepocket",
"1504136163",
"1439776386",
"898040123",
"1610831021",
"1602508478",
"973337925",
"593715088",
"1450015565",
"0",
"1153883316",
"1625097467",
"1425793208",
"1622165569",
"1524613492",
"388838723",
"307764057",
"1480236789",
"6446669987",
"1562817072",
"399452287",
"476555713",
"1497489224",
"1509453185",
"537919329",
"484115113",
"463431091",
"6443484197",
"1054271011",
"1139609950",
"1579072162",
"431434152",
"1549814091",
"1502227743",
"749124884",
"1389760587",
"367342259",
"1444813385",
"1614685082",
"382233851",
"1575684487",
"349160522",
"1564143097",
"1639354550",
"1374403536",
"1148587060",
"1513147390",
"1493199883",
"1424533120",
"1554601502",
"1642269864",
"1565374299",
"912390687",
"1603356904",
"1500901823",
"1584596271",
"454768104",
"398890666",
"1073936461",
"552517300",
"1508418993",
"468996152",
"949295212",
"548607187",
"439873467",
"410094240",
"1487882541",
"com.lemel.hiddengame",
"1437615191",
"1597897013",
"507605066",
"1619444841",
"749083919",
"1559236118",
"1584342274",
"302955766",
"1577330287",
"538340426",
"389157776",
"1483471584",
"424830861",
"1480338372",
"1561184462",
"1332040040",
"1629034559",
"1243410543",
"6445832474",
"571393580",
"575624739",
"6449491552",
"608206510",
"1585970304",
"514485964",
"1157926535",
"1447871511",
"1633171432",
"327205553",
"1487291128",
"1355464544",
"475211454",
"324160932",
"1637786114",
"1531843592",
"300704847",
"962133447",
"1603801118",
"1471967529",
"837817797",
"363920434",
"1465591510",
"1557197419",
"1528127833",
"546473125",
"1543845882",
"388627783",
"1486214495",
"1382466301",
"1536131108",
"1609970658",
"1581708116",
"749133753",
"382596778",
"892521917",
"464562684",
"878506376",
"1523297725",
"393402212",
"335445524",
"329218549",
"1512407890",
"888963581",
"725730936",
"505581274",
"1584652796",
"1456989345",
"1475864805",
"1482131986",
"311395856",
"1600041046",
"297368629",
"1504361627",
"1476678178",
"597088068",
"1534471879",
"1548857482",
"1633307858",
"1235581326",
"1044534198",
"1631335886",
"1620473280",
"1636821805",
"1163798425",
"1379080711",
"1302451299",
"1291854522",
"1176147574",
"564974992",
"1660712207",
"580488128",
"1462123372",
"6443762301",
"1637447727",
"1562663583",
"1546059465",
"581838289",
"1534740597",
"505175161",
"1483439031",
"1519469207",
"488575683",
"462678375",
"1490993527",
"331805052",
"1523402128",
"1197041040",
"1539641263",
"454988262",
"334456452",
"493619333",
"1488137829",
"1573755134",
"1567183808",
"1083382404",
"1642304873",
"401074157",
"1620339095",
"337604610",
"1536578421",
"1633015266",
"1142166193",
"1288430163",
"1491074310",
"1453795744",
"6443843866",
"1515682612",
"1449014713",
"505500141",
"473299958",
"1618258678",
"1335982274",
"662307361",
"com.coloring.color.number.ios",
"1554443694",
"557153158",
"1448360185",
"504646663",
"458288241",
"1583551624",
"331808522",
"6445882100",
"1479305181",
"1584796659",
"1492160489",
"1492055041",
"1540237278",
"1560663843",
"1422994973",
"1537012560",
"406719683",
"706099493",
"1578990727",
"jp.hops",
"498405045",
"888615473",
"1089336971",
"386981161",
"1532397340",
"1561719761",
"326299304",
"com.mobilityware.SpiderSolitaireFree",
"505215818",
"708600202",
"358801284",
"571801488",
"1435899684",
"1466297045",
"1469889140",
"1635760774",
"1474917623",
"1383187127",
"6443812056",
"287197884",
"420010189",
"1453204106",
"1167490395",
"1580014348"]

URL_PATTERN = 'https://data.42matters.com/api/v2.0/ios/apps/lookup.json?id={}&access_token=1a079d1ff84a7658a31597aac7ec02026ebf8ea5' #For iOS
#URL_PATTERN = 'https://data.42matters.com/api/v4.0/android/apps/category.json?p={}&access_token=1a079d1ff84a7658a31597aac7ec02026ebf8ea5' #For Android
for p in bundle:
        url = URL_PATTERN.format(p)
        result = requests.get(url)
        v = result.json()

        try:
                print(v['trackId'], "|", v['trackCensoredName'], "|", v['trackViewUrl'], "|", v['primaryGenreName'], "|", v['sellerName'].encode("utf-8"), "|", v['sellerUrl'], "|", v['iab'][0]['id'], "|",  v['iab'][0]['name'] , "|", v['iab'][1]['id'] , "|", v['iab'][1]['name'],"|",v['iab'][2]['id'] , "|", v['iab'][2]['name'], "|", v['iab'][3]['id'] , "|", v['iab'][3]['name']) #For iOS
                #print(v['package_name'],"|", v['title'], "|", v['market_url'], "|", v['category'], "|", v['developer'], "|", v['website'], "|", v['iab'][0]['id'] , "|",  v['iab'][0]['name']) #For Android
        except IndexError as e1:
                try:
                    print(v['trackId'], "|", v['trackCensoredName'], "|", v['trackViewUrl'], "|", v['primaryGenreName'],
                          "|", v['sellerName'].encode("utf-8"), "|", v['sellerUrl'], "|", v['iab'][0]['id'], "|",
                          v['iab'][0]['name'], "|", v['iab'][1]['id'], "|", v['iab'][1]['name'], "|", v['iab'][2]['id'],
                          "|", v['iab'][2]['name'])  # For iOS
                except IndexError as e2:
                        try:
                            print(v['trackId'], "|", v['trackCensoredName'], "|", v['trackViewUrl'], "|",
                                  v['primaryGenreName'], "|", v['sellerName'].encode("utf-8"), "|", v['sellerUrl'], "|",
                                  v['iab'][0]['id'], "|", v['iab'][0]['name'], "|", v['iab'][1]['id'], "|",
                                  v['iab'][1]['name'])  # For iOS
                        except IndexError as e3:
                                try:
                                    print(v['trackId'], "|", v['trackCensoredName'], "|", v['trackViewUrl'], "|",
                                          v['primaryGenreName'], "|", v['sellerName'].encode("utf-8"), "|",
                                          v['sellerUrl'], "|", v['iab'][0]['id'], "|", v['iab'][0]['name'])  # For iOS
                                except Exception as ex4:
                                        print(ex4)
                        except Exception as ex3:
                            print(ex3)
                except Exception as ex2:
                    print(ex2)
        except Exception as ex1:
            print(ex1)

sys.stdout.close()